# Сканер портов
## Реализация
![alt text](https://github.com/dashdown/tcpscan/blob/dashdown-patch-1/how_it_works.jpg "Схематическое описание реализации")

## Недостатки реализации
* Параметры типа timeout, scanners_count (и еще парочка) нельзя настроить снаружи кода. Для host/port удобно было бы оставить по дефолту 127.0.0.1:8080, но еще и задаваемым при запуске `python main.py 192.57.242.15 8008`.
* Состояние подключения клиента не отслеживается. Если клиент обрывает соединение, скан портов продолжается. А можно останавливать скан, поскольку результат присылать уже некому. 
* Отсутствует обработка ошибки `aiohttp.http_exceptions.BadStatusLine: invalid HTTP method`, возникающей при обращении по HTTPS. Приложение от этого НЕ крашится, но замалчивать явно не удается. 
* Сканирование дает ложно-отрицательные результаты, если связи со сканируемым хостом нет. Даже если есть открытые TCP-порты, app скажет, что закрыты все. 

## Постановка задачи
Требуется разработать web-приложение для сканирования открытых TCP поротв удаленного хоста.
Приложение должно реализовать следующее REST API: `GET /scan/<ip>/<begin_port>/<end_port>`. Параметры:
* ip - хост, который необходимо просканировать
* begin_port - начала диапозона портов для сканирования
* end_port - конец диапозона портов для сканирования

Обработчик данного урла - запускает сканирование указанного хоста, и отдает информацию клиенту в формате JSON (можно частями). Формат ответа: `[{"port": "integer", "state": "(open|close)"}]`.

Требования к программе:
* Aiohttp (>= 3.2.0);
* Python (>= 3.5);
* Логирование syslog - входящие запросы, ошибки и т.д.

Будет плюсом (не обязательно, но желательно):
* Наличие тестов (AioHTTPTestCase);
* Готовый spec-файл для сборки RPM-пакета.

Предпочтительные средства реализации:
* Образ системы Fedora 31.

Результат:
* Код, расположенный на git-репозитории (например, github).